<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="img/favicon.ico" sizes="16x16" />
    <title>Secure Amazon Price Tracker | Cart Scout</title>
    <link rel="stylesheet" href="s.css">

    <script>
        function determineBrowser() {
            //#region Feature Detection
                // Opera 8.0+
                var isOpera = (!!window.opr && !!opr.addons) || !!window.opera || navigator.userAgent.indexOf(' OPR/') >= 0;

                // Firefox 1.0+
                var isFirefox = typeof InstallTrigger !== 'undefined';

                // Safari 3.0+ "[object HTMLElementConstructor]" 
                var isSafari = /constructor/i.test(window.HTMLElement) || (function (p) { return p.toString() === "[object SafariRemoteNotification]"; })(!window['safari'] || (typeof safari !== 'undefined' && window['safari'].pushNotification));

                // Internet Explorer 6-11
                var isIE = /*@cc_on!@*/false || !!document.documentMode;

                // Edge 20+
                var isEdge = !isIE && !!window.StyleMedia;

                // Chrome 1 - 79
                var isChrome = !!window.chrome && (!!window.chrome.webstore || !!window.chrome.runtime);

                // Edge (based on chromium) detection
                var isEdgeChromium = isChrome && (navigator.userAgent.indexOf("Edg") != -1);

                // Blink engine detection
                var isBlink = (isChrome || isOpera) && !!window.CSS;
            //#endregion

            //return browser.prototype._cachedResult =
            return  isOpera ? 'Opera' :
                    isFirefox ? 'Firefox' :
                    isSafari ? 'Safari' :
                    isChrome ? 'Chrome' :
                    isIE ? 'IE' :
                    isEdge ? 'Edge' :
                    isBlink ? 'Blink' :
                    "Chrome"; // default to Chrome
        }
    
        let browser = determineBrowser();

        window.onload = function() { //when the document is finished loading

            if (browser == "Firefox" || browser == "Chrome") {
                //document.getElementById("title").innerText += " available for " + browser;
                switch (browser) {
                    case "Firefox":
                        document.getElementById("btnAdd1").innerHTML = "<a href=\"https://addons.mozilla.org/firefox/downloads/latest/cart-scout-amz-price-tracker\">Add to " + browser + " - It's Free<a>";
                        break;
                    default:
                    case "Chrome":
                        document.getElementById("btnAdd1").innerHTML = "<a href=\"https://chrome.google.com/webstore/detail/afankacbebechgbjdoliclmbpkkellhi\" target=\"blank\">Add to " + browser + " - It's Free<a>";
                        break;
                }
                


            }

            let intro = document.getElementById("howitworks_video");


            function checkVis() {
                let yMid = intro.offsetTop + intro.offsetHeight / 2;

                if (window.pageYOffset + window.innerHeight > yMid) {
                    intro.play();
                }

                //console.log("intro " + intro + " type " + typeof(intro));
                //console.log("middle " + yMid + " windowbottom " + (window.pageYOffset + window.innerHeight));
            }

            let lastState = 0;

            intro.addEventListener("timeupdate", (e) => {
                //console.log("time has been updated " + intro.currentTime);
                if (intro.currentTime < 4) {
                    if (lastState != 1) {
                        console.log("1");
                        lastState = 1;
                        document.getElementById("step-2").classList.remove("highlighted");
                        document.getElementById("step-3").classList.remove("highlighted");
                        document.getElementById("step-1").classList.add("highlighted");
                        document.getElementById("step-2").nextElementSibling.classList.remove("focused");
                        document.getElementById("step-3").nextElementSibling.classList.remove("focused");
                        document.getElementById("step-1").nextElementSibling.classList.add("focused");
                    }
                } else if (intro.currentTime < 8.1) {
                    console.log("2");
                    if (lastState != 2) {
                        lastState = 2;
                        document.getElementById("step-1").classList.remove("highlighted");
                        document.getElementById("step-3").classList.remove("highlighted");
                        document.getElementById("step-2").classList.add("highlighted");
                        document.getElementById("step-1").nextElementSibling.classList.remove("focused");
                        document.getElementById("step-3").nextElementSibling.classList.remove("focused");
                        document.getElementById("step-2").nextElementSibling.classList.add("focused");
                    }
                } else if(lastState != 3) {
                    console.log("3");
                    lastState = 3;
                    document.getElementById("step-1").classList.remove("highlighted");
                    document.getElementById("step-2").classList.remove("highlighted");
                    document.getElementById("step-3").classList.add("highlighted");
                    document.getElementById("step-1").nextElementSibling.classList.remove("focused");
                    document.getElementById("step-2").nextElementSibling.classList.remove("focused");
                    document.getElementById("step-3").nextElementSibling.classList.add("focused");
                }
                

            });

            window.addEventListener("scroll", checkVis, false);
            window.addEventListener("resize", checkVis, false);

            console.log("next " + document.getElementById("step-1").nextElementSibling + " type " + typeof(document.getElementById("step-1").nextSibling))
            document.getElementById("step-1").nextElementSibling.addEventListener("click", (e) => {
                intro.currentTime = 0;
                console.log("click 1");
            });
            document.getElementById("step-2").nextElementSibling.addEventListener("click", (e) => {
                intro.currentTime = 4;
            });
            document.getElementById("step-3").nextElementSibling.addEventListener("click", (e) => {
                intro.currentTime = 8.1;
            });

        }



        </script>
</head>
<body>

    <div id="header">

        <img src="img/logo.png" id="logo">
        <div id="title">
            Cart Scout
        </div>
        
    </div>

    <div class="content-box">
        <img src="img/page.png" style="position:absolute; left:0px; top: 200px;" class="slide">   


        <div class="horizontal">

            <div style="display: flex; flex-direction: column; justify-content: left; width: 30%;">
                <img src="img/cart.png" class="glide" style="width:200px;">   
            </div>


            <div class="content-right top">
                <h1>Track Prices on Amazon</h1>
                <p style="margin: 15 27;">Stop wasting money — Cart Scout helps you get the best deals on your favorite products</p>
                <div class="btn">
                    <div id="btnAdd1">
                    </div>
                </div>
                <p style="font-size:14px; line-height: 16px;">★★★★★<br>Excelling Apps has over 2 million downloads across several platforms</p>
            </div>



        </div>




    </div>

    <div class="content-box">
        <div class="horizontal">
            <!--<video id="howitworks_video" width="750" autoplay loop muted>!-->
            <video id="howitworks_video" width="750" loop muted>
                <source src="img/intro.mp4" type="video/mp4">
                How it works
            </video>
            <div class="content-right" style="color: #757575">
                
                <h1 style="font-size:36px;">How it works</h1>
                <div style="display:flex;">
                    <div id="step-1" class="step">
                    </div>
                    <div class="clickable">
                        <h3>1 Add in seconds</h3>
                        It just takes a few clicks to add to your computer and it’s 100% free.
                    </div>
                </div>
                <div style="display:flex;">
                    <div id="step-2" class="step">
                    </div>
                    <div class="clickable">
                        <h3>2 Add your products</h3>
                        Navigate to your favorite products and start tracking their prices.
                    </div>
                </div>
                <div style="display:flex;">
                    <div id="step-3" class="step">
                    </div>
                    <div class="clickable">
                        <h3>3 Get notified</h3>
                        Cart Scout will automatically notify you of coupons and price drops.
                    </div>
                </div>
            </div>
        </div>
    </div>


    <div class="content-box">
        <div class="horizontal">

            <h1>Benefits</h1>
            
            <div class="content-right">
                <h3>Availability and price drop notifications</h3>
                <h3>Keep a list of all your favorite Amazon items</h3>
                <h3>Powerful search and sort functionality to quickly find the best deals</h3>
                <h3>Unrivaled data security through server-less price tracking</h3>
                <h3>Synchronized data across all your devices</h3>
                <h3>Dark mode included for reduced eye strain</h3>
                <h3>It's completely free!</h3>
                <h3>Start saving now.</h3>
                
            </div>
        </div>
    </div>

    <div id="footer">
        <div class="column">

            <h1>Download now!</h1>
            <span>Save money shopping on Amazon with Cart Scout</span>
            <span>Excelling Apps has over 2 million downloads on Google Play</span>
        </div>

        <div class="column">

            <h1>Available for</h1>
            <span><a href="https://chrome.google.com/webstore/detail/afankacbebechgbjdoliclmbpkkellhi" target="blank">Chrome</a></span>
            <span><a href="https://addons.mozilla.org/firefox/downloads/latest/cart-scout-amz-price-tracker">Firefox</a></span>
        </div>
    </div>
    
</body>
</html>